/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

!function(){var e="function"==typeof define&&define.amd,t="object"==typeof exports,n=null,r=function(){};t?(r=require,n=global):n=window,factory=function(){var e,t,r;return function(n){function o(e,t){return w.call(e,t)}function i(e,t){var n,r,o,i,s,a,l,c,u,p,d=t&&t.split("/"),f=v.map,m=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=d.concat(e.split("/")),c=0;c<e.length;c+=1)if(p=e[c],"."===p)e.splice(c,1),c-=1;else if(".."===p){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||m)&&f){for(n=e.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),d)for(u=d.length;u>0;u-=1)if(o=f[d.slice(0,u).join("/")],o&&(o=o[r])){i=o,s=c;break}if(i)break;!a&&m&&m[r]&&(a=m[r],l=c)}!i&&a&&(i=a,s=l),i&&(n.splice(0,s,i),e=n.join("/"))}return e}function s(e,t){return function(){return f.apply(n,x.call(arguments,0).concat([e,t]))}}function a(e){return function(t){return i(t,e)}}function l(e){return function(t){h[e]=t}}function c(e){if(o(y,e)){var t=y[e];delete y[e],b[e]=!0,d.apply(n,t)}if(!o(h,e)&&!o(b,e))throw new Error("No "+e);return h[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function p(e){return function(){return v&&v.config&&v.config[e]||{}}}var d,f,m,g,h={},y={},v={},b={},w=Object.prototype.hasOwnProperty,x=[].slice;m=function(e,t){var n,r=u(e),o=r[0];return e=r[1],o&&(o=i(o,t),n=c(o)),o?e=n&&n.normalize?n.normalize(e,a(t)):i(e,t):(e=i(e,t),r=u(e),o=r[0],e=r[1],o&&(n=c(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},g={require:function(e){return s(e)},exports:function(e){var t=h[e];return"undefined"!=typeof t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:p(e)}}},d=function(e,t,r,i){var a,u,p,d,f,v,w=[];if(i=i||e,"function"==typeof r){for(t=!t.length&&r.length?["require","exports","module"]:t,f=0;f<t.length;f+=1)if(d=m(t[f],i),u=d.f,"require"===u)w[f]=g.require(e);else if("exports"===u)w[f]=g.exports(e),v=!0;else if("module"===u)a=w[f]=g.module(e);else if(o(h,u)||o(y,u)||o(b,u))w[f]=c(u);else{if(!d.p)throw new Error(e+" missing "+u);d.p.load(d.n,s(i,!0),l(u),{}),w[f]=h[u]}p=r.apply(h[e],w),e&&(a&&a.exports!==n&&a.exports!==h[e]?h[e]=a.exports:p===n&&v||(h[e]=p))}else e&&(h[e]=r)},e=t=f=function(e,t,r,o,i){return"string"==typeof e?g[e]?g[e](t):c(m(e,t).f):(e.splice||(v=e,t.splice?(e=t,t=r,r=null):e=n),t=t||function(){},"function"==typeof r&&(r=o,o=i),o?d(n,e,t,r):setTimeout(function(){d(n,e,t,r)},4),f)},f.config=function(e){return v=e,v.deps&&f(v.deps,v.callback),f},r=function(e,t,n){t.splice||(n=t,t=[]),o(h,e)||o(y,e)||(y[e]=[e,t,n])},r.amd={jQuery:!0}}(),r("almond",function(){}),function(e){r("main",["require","exports","module"],function(t,n,r){var o,i,s,a;return i=function(){var t,n,r,o;return t=document.getElementById("narrows_back"),n=document.getElementById("narrows_middle"),o=0,r=function(){return t.style.backgroundPositionY="-"+o+"px",n.style.backgroundPositionY="-"+2*o+"px",o++},e.setInterval(r,70)},s=function(){function t(e){this.projects=e,"undefined"==typeof this.projects||"array"!==this.projects,this.item_height=300,this.createDom(),this.makeImages(),this.scrollController()}return t.prototype.createDom=function(){var e,t,n,r,o,i,s;t=document.getElementById("portfolio"),o=document.createDocumentFragment(),r=document.body.clientWidth,s=this.projects;for(i in s)n=s[i],e=document.createElement("canvas"),e.id="prtf_"+i,e.width=r,e.height=this.item_height,o.appendChild(e);return t.appendChild(o)},t.prototype.makeImages=function(){var e,t,n,r,o,i=this;r=this.projects,o=[];for(n in r)e=r[n],t=new Image,t.onload=function(e){return function(){return i.drawCanvas(e,t,1)}}(n),t.src=e.src,o.push(this.projects[n].img=t);return o},t.prototype.drawCanvas=function(e,t,n){var r,o,i;return i=document.getElementById("prtf_"+e),i.height=this.item_height,r=i.getContext("2d"),r.fillStyle="black",r.fillRect(0,0,i.width,this.item_height),r.scale(1,n),r.drawImage(t,0,0),o=r.createLinearGradient(0,0,0,this.item_height),o.addColorStop(0,"rgba(255, 253, 241, "+(.5-n)+")"),o.addColorStop(.5,"rgba(255, 253, 241, "+(1-n)+")"),o.addColorStop(.5,"rgba(0, 0, 0, "+(1-n)+")"),o.addColorStop(1,"rgba(0, 0, 0, "+(1-n)+")"),r.fillStyle=o,r.fillRect(0,0,i.width,this.item_height)},t.prototype.scrollController=function(){var t,n,r,o,i,s,a,l,c,u;if(r=document.getElementById("container"),this.start_point=r.scrollHeight-e.innerHeight+140,a=e.pageYOffset||document.body.scrollTop,a>=this.start_point){o=0,c=this.projects,u=[];for(i in c)t=c[i],l=this.start_point+this.item_height*o,n=l+this.item_height,a>=l&&n>=a&&(s=(a-l)/this.item_height,this.drawCanvas(i,this.projects[i].img,s.toFixed(2))),a>n&&n+50>a&&this.drawCanvas(i,this.projects[i].img,1),u.push(o++);return u}},t}(),a=function(){function t(e){var t,n,r;this.config=e,this.bar_width=300,r=this.config;for(n in r)t=r[n],this.createDom(n,t);this.scrollController()}return t.prototype.getAbilityLevel=function(e){switch(!1){case!(.3>=e):return"basic";case!(.6>=e):return"intermediate";case!(.8>=e):return"advanced";case!(1>=e):return"expert";default:return"excellent"}},t.prototype.createDom=function(e,t){var n,r,o,i,s,a,l,c,u,p,d,f;a=document.getElementById("skills"),c=document.createDocumentFragment(),s=document.createElement("div"),s.className="group "+e,s.id="sk_bar_"+e;for(o in t)for(l=t[o],d=0,f=l.length;f>d;d++)u=l[d],i=document.createElement("div"),i.className="box",p=document.createElement("label"),p.className="label",p.innerHTML=u.name,n=document.createElement("div"),n.className="bar "+e,n.dataset.width=this.bar_width*u.progress,r=document.createElement("span"),r.innerHTML=this.getAbilityLevel(u.progress),n.appendChild(r),i.appendChild(p),i.appendChild(n),s.appendChild(i);return c.appendChild(s),a.appendChild(c)},t.prototype.animateBars=function(e){var t,n,r,o;return o=document.getElementById("sk_bar_"+e),o.style.disabled!==!0?(o.style.disabled=!0,r=o.getElementsByClassName("box"),t=function(e){var t,n,r;return n=new Date,t=e.delta,r=setInterval(function(){var t;return t=(new Date-n)/e.duration,t>1&&(t=1),e.step(e.delta(t)),1===t?(clearInterval(r),e.complete&&e.complete()):void 0},e.delay||13)},n=function(e){return Math.pow(e,4)},t({delay:10,duration:1600,delta:n,step:function(e){var t,n,o,i;for(i=[],n=0,o=r.length;o>n;n++)t=r[n],i.push(function(t){var n,r;return n=t.getElementsByClassName("bar"),r=t.getElementsByTagName("span"),n[0].style.width=n[0].dataset.width*e+"px",r[0].style.opacity=e}(t));return i}})):void 0},t.prototype.scrollController=function(){var t,n,r,o,i,s,a,l;if(t=document.getElementById("header"),s=t.scrollHeight-e.innerHeight+220,i=e.pageYOffset||document.body.scrollTop,n=0,i>=s&&1528>=i){console.log(s,i),a=this.config,l=[];for(r in a)o=a[r],i>=s+350*n&&this.animateBars(r),l.push(n++);return l}},t}(),o=function(){var t,n;return i(),t=new s({vahtang:{src:"images/vahtang.jpg"},test:{src:"images/vahtang.jpg"},demo:{src:"images/vahtang.jpg"}}),n=new a({design:{settings:{text:"Hello, design!"},data:[{name:"web-design",progress:.9},{name:"typography",progress:.6},{name:"illustrations",progress:.3},{name:"usability",progress:1}]},coding:{settings:{text:"Hello, coding!"},data:[{name:"html (jade, haml)",progress:1},{name:"css (sass)",progress:.9},{name:"javascript",progress:.75},{name:"coffeescript",progress:.61}]},programming:{data:[{name:"node.js",progress:.61},{name:"ruby on rails",progress:.5},{name:"php (yii, kohana)",progress:.9},{name:"phyton",progress:.25},{name:"sql (mysql, postgress)",progress:.7},{name:"nosql (mongodb)",progress:.4}]},another:{data:[{name:"git",progress:.75},{name:"linux",progress:.65},{name:"os x",progress:.5}]}}),e.onscroll=function(){return t.scrollController(),n.scrollController()}}(),r.exports})}(n),t("main")},e?define([],factory):t?module.exports=factory():factory()}();